<div class="row">
  <div class="col-md-12">
    <h1 ng-if="user.data.id" class="page-header">
      <div class="pull-right">
        <div class="btn-group">
          <button type="button" class="btn btn-primary"
                  ng-disabled="user.form.$pristine || user.form.$invalid"
                  ng-click="user.save()">
            Запис
            <i class="fa fa-save fa-fw"></i>
          </button>
        </div>
      </div>
      <span ng-if="!user.data.id">Нов наблюдател</span>
      <span ng-if="user.data.id">Редакция на профил</span>
    </h1>
  </div>

  <div class="col-md-12">
    <form name="user.form"
          role="form"
          autocomplete="off"
          confirm-on-exit="user.form.$dirty"
          confirm-message-window="Имате незаписани промени!"
          confirm-message-route="Имате незаписани промени. Сигурни ли сте че искате да продължите?">

      <field ng-if="$user.isAdmin()" name="admin" type="bool"
             label="Администратор"
             model="user.data.isAdmin"
      ></field>

      <field name="firstName" type="text" required="true"
             label="Име"
             model="user.data.firstName"
      ></field>

      <field name="lastName" type="text" required="true"
             label="Фамилия"
             model="user.data.lastName"
      ></field>

      <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
      <input ng-if="!user.hideFake" type="text" name="fakeusernameremembered1"/>
      <input ng-if="!user.hideFake" type="password" name="fakepasswordremembered1"/>

      <field name="email" type="email" required="true"
             label="E-mail" readonly="user.data.id"
             autocomplete="off"
             model="user.data.email"
      ></field>

      <field ng-if="!user.data.id"
             name="password" type="password" required="true"
             label="Парола"
             autocomplete="off"
             model="user.data.password"
      ></field>

      <field ng-if="$user.getIdentity().id === user.data.id" language-switcher name="language" type="select"
             choices="[{id: 'bg', label: 'BG'}, {id: 'en', label: 'EN'}]"
             label="Език"
             model="user.data.language"
             on-select="$ctrl.changeLanguage(model)"></field>

      <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
      <input ng-if="!user.hideFake" type="text" name="fakeusernameremembered2"/>
      <input ng-if="!user.hideFake" type="password" name="fakepasswordremembered2"/>

      <field name="address" type="text"
             label="Адрес"
             model="user.data.address"></field>

      <field name="city" type="text"
             label="Град"
             model="user.data.city"></field>

      <field name="postcode" type="text"
             label="Пощенски код"
             model="user.data.postcode"></field>

      <field name="phone" type="phone"
             label="Телефон"
             model="user.data.phone"></field>

      <field name="mobile" type="phone"
             label="Моб. телефон"
             model="user.data.mobile"></field>

      <field name="birds_knowledge" type="select"
             choices="['начинаещ', 'напреднал', 'професионалист']"
             label="Ниво на познание на птиците"
             placeholder="- няма -"
             model="user.data.birdsKnowledge"></field>

      <field name="profile" type="text"
             label="Профил"
             model="user.data.profile"></field>

      <field name="level" type="select"
             choices="['първо', 'второ']"
             label="Ниво"
             placeholder="- няма -"
             model="user.data.level"></field>

      <field name="notes" type="memo"
             label="Бележки"
             model="user.data.notes"></field>

      <hr>

      <h3>Подпис</h3>

      <img ng-src="{{user.data.getBannerUrl()}}">

      <div class="form-group">
        <label class="control-label"
               for="banner1">Вграждане в BB forum</label>
        <input type="text"
               id="banner1"
               class="form-control"
               value="[URL=https://smartbirds.org/][IMG]{{user.data.getBannerUrl()}}[/IMG][/URL]"
               readonly>
      </div>
      <div class="form-group">
        <label class="control-label"
               for="banner3">Алтернативно вграждане в BB forum</label>
        <input type="text"
               id="banner3"
               class="form-control"
               value="[URL=https://smartbirds.org/][IMG={{user.data.getBannerUrl()}}][/IMG][/URL]"
               readonly>
      </div>
      <div class="form-group">
        <label class="control-label"
               for="banner2">Вграждане в HTML</label>
        <input type="text"
               id="banner2"
               class="form-control"
               value='<a href="https://smartbirds.org/"><img src="{{user.data.getBannerUrl()}}" border="0"></a>'
               readonly>
      </div>
    </form>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div class="pull-right">
      <div class="btn-group">
        <button type="button" class="btn btn-primary"
                ng-disabled="user.form.$pristine || user.form.$invalid"
                ng-click="user.save()">
          Запис
          <i class="fa fa-save fa-fw"></i>
        </button>
      </div>
    </div>
  </div>
</div>
